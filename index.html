<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Photo Gallery</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- CSS -->
    <link rel="stylesheet" href="css/normalize.css">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
  </head>
  <body>
    <div class="container">
      <input type="text" placeholder="Enable JavaScript to search" readonly class="search">
      <div class="gallery">
        <span class="item"><a href="photos/01.jpg"><img src="photos/thumbnails/01.jpg" title="Hay Bales" alt="I love hay bales. Took this snap on a drive through the countryside past some straw fields."></a></span>
        <span class="item"><a href="photos/02.jpg"><img src="photos/thumbnails/02.jpg" title="Lake" alt="The lake was so calm today. We had a great view of the snow on the mountains from here."></a></span>
        <span class="item"><a href="photos/03.jpg"><img src="photos/thumbnails/03.jpg" title="Canyon" alt="I hiked to the top of the mountain and got this picture of the canyon and trees below."></a></span>
        <span class="item"><a href="photos/04.jpg"><img src="photos/thumbnails/04.jpg" title="Iceberg" alt="It was amazing to see an iceberg up close, it was so cold but didnâ€™t snow today. "></a></span>
        <span class="item"><a href="photos/05.jpg"><img src="photos/thumbnails/05.jpg" title="Desert" alt="The red cliffs were beautiful. It was really hot in the desert but we did a lot of walking through the canyons."></a></span>
        <span class="item"><a href="photos/06.jpg"><img src="photos/thumbnails/06.jpg" title="Fall" alt="Fall is coming, I love when the leaves on the trees start to change color."></a></span>
        <span class="item"><a href="photos/07.jpg"><img src="photos/thumbnails/07.jpg" title="Plantation" alt="I drove past this plantation yesterday, everything is so green!"></a></span>
        <span class="item"><a href="photos/08.jpg"><img src="photos/thumbnails/08.jpg" title="Dunes" alt="My summer vacation to the Oregon Coast. I love the sandy dunes!"></a></span>
        <span class="item"><a href="photos/09.jpg"><img src="photos/thumbnails/09.jpg" title="Countryside Lane" alt="We enjoyed a quiet stroll down this countryside lane."></a></span>
        <span class="item"><a href="photos/10.jpg"><img src="photos/thumbnails/10.jpg" title="Sunset" alt="Sunset at the coast! The sky turned a lovely shade of orange."></a></span>
        <span class="item"><a href="photos/11.jpg"><img src="photos/thumbnails/11.jpg" title="Cave" alt="I did a tour of a cave today and the view of the landscape below was breathtaking."></a></span>
        <span class="item"><a href="photos/12.jpg"><img src="photos/thumbnails/12.jpg" title="Bluebells" alt="I walked through this meadow of bluebells and got a good view of the snow on the mountain before the fog came in."></a></span>
      </div>
    </div>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="js/magnific-popup/jquery.magnific-popup.min.js"></script>
    <script>
      $('.gallery').magnificPopup({
        delegate: 'a',
        type: 'image',
        gallery: {
          enabled: true
        },
        image: {
          titleSrc: function(item) {
            return (item.el.children().attr('title')) + '<small>' + item.el.children().attr('alt') + '</small>';
          }
        }
      });

      const Gallery = {
        div: document.querySelector('.gallery'),
        items: [],
        init: function() {
          for(var i = 0; i < Gallery.div.children.length; i++) {
            Gallery.items.push(Gallery.div.children[i]);
          }
        },
        displayAllItems: function() {
          for(var i = 0; i < Gallery.items.length; i++) {
            Gallery.div.appendChild(Gallery.items[i]);
          }
        },
        search: function(str) {
          Gallery.div.innerHTML = '';
          Gallery.displayAllItems();
          str = str.toLowerCase();
          for(var i = Gallery.div.children.length - 1; i >= 0; i--) {
            console.log(i);
            const item = Gallery.div.children[i];
            let title = item.children[0].children[0].getAttribute('title');
              title += ' ' + item.children[0].children[0].getAttribute('alt');
              title = title.toLowerCase();
            if(!title.includes(str)) {
              Gallery.div.removeChild(item);
            }
          }
        }
      };

      // init
      Gallery.init();
      const search = document.querySelector('.search');
      search.removeAttribute('readonly');
      search.style.visibility = 'visible';
      search.setAttribute('placeholder', 'Search...');
      search.addEventListener('keyup', function(){
        Gallery.search(search.value);
      });
    </script>
  </body>
</html>
